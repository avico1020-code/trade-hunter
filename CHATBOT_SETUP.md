# הדרכה לשימוש בצ'אט בוט OpenAI Assistant

## מבנה הקבצים

### קבצי API (Backend)
1. **`app/api/chat/thread/route.ts`** - יוצר thread חדש
2. **`app/api/chat/message/route.ts`** - שולח הודעות ומקבל תשובות מהאסיסטנט

### קובץ הקומפוננטה
3. **`components/main-screen/AIChatPanel.tsx`** - הקומפוננטה המלאה של הצ'אט בוט

### אינטגרציה
4. הצ'אט משולב בחלונית הימנית של כל הדפים המשתמשים ב-AIChatPanel

## משתני סביבה נדרשים

וודא שיש לך ב-`.env.local`:

```env
OPENAI_API_KEY=sk-...
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_...
CLERK_SECRET_KEY=sk_...
```

## תכונות

### 1. **עקביות בין דפים**
- השיחה נשמרת ב-`localStorage`
- Thread ID נשמר כך שהשיחה ממשיכה בין דפים שונים

### 2. **אבטחה**
- כל הבקשות מאומתות דרך Clerk
- רק משתמשים מחוברים יכולים להשתמש בצ'אט

### 3. **UI/UX**
- כפתור צף בצד שמאל למטה
- חלון צ'אט מלא עם היסטוריית שיחה
- אנימציות טעינה
- תמיכה מלאה ב-RTL/עברית

### 4. **פונקציונליות**
- שליחת הודעות עם Enter
- מחיקת שיחה (כפתור פח אשפה)
- סגירה ופתיחה של החלון
- עיצוב מותאם לנושא של האתר (ShadCN)

## שימוש

### התחלת שיחה
1. הצ'אט מופיע בחלונית הימנית של הדפים (צ'אט בינה מלאכותית)
2. הקלד הודעה בשדה הקלט
3. לחץ Enter או על כפתור השליחה

### מחיקת שיחה
לחץ על סמל פח האשפה (🗑️) בראש החלונית

### המשך שיחה בין דפים
עבור בין דפים - השיחה נשמרת ב-localStorage ותמשיך מהמקום בו הפסקת!

## טכנולוגיות

- **OpenAI Assistants API** - מנוע הצ'אט
- **Clerk** - אימות משתמשים
- **Next.js 15** - Framework
- **ShadCN UI** - קומפוננטות UI
- **localStorage** - שמירת state

## פתרון בעיות

### הצ'אט לא עובד
1. וודא ש-`OPENAI_API_KEY` קיים ב-`.env.local`
2. וודא שהמשתמש מחובר דרך Clerk
3. בדוק את ה-Console בדפדפן לשגיאות

### השיחה לא נשמרת
- localStorage עשוי להיות מושבת בדפדפן
- נקה את ה-cache של הדפדפן

### שגיאת אימות
- וודא שה-Clerk keys נכונים
- בדוק שהמשתמש מחובר

## ID האסיסטנט

האסיסטנט הנוכחי: `asst_woLUSxRW2An5n5abQYsP7wwR`

אם תרצה לשנות אסיסטנט, ערוך ב-`app/api/chat/message/route.ts`:
```typescript
const ASSISTANT_ID = "YOUR_NEW_ASSISTANT_ID";
```

## התאמה אישית

### עיצוב
ערוך את `components/main-screen/AIChatPanel.tsx` - הקומפוננטה משתמשת ב-Tailwind ו-ShadCN

### מיקום ההודעות
החלונית משתמשת בעיצוב Card של ShadCN ומותאמת לחלל שהוקצה לה בדף

### גובה החלונית
החלונית משתמשת ב-`h-full` ומתאימה את עצמה לגובה הזמין בדף

## בהצלחה! 🚀

